<!DOCTYPE html>
<head>
		<link rel="icon" href="../ptrk2.gif" type="image/gif">
	<title> sadness.online | ~~~ </title>
</head>
<body>
	<div class="wrapper">
			<canvas id="draw" width="100%" height="100%"></canvas>
	</div>
				
	<style>

		html, body {
			margin:0;
			height: 100vh;
			width: 100vw;
			overflow: hidden;
			display: flex;
			justify-content: center;
			background: black;
		}
		*, *:before, *:after { box-sizing: inherit; }

		.wrapper {
			margin:0 auto;
			height: 100vh;
			width: 100vw;	
		}

	</style>

	<Script>

		const canvas = document.querySelector('#draw');
		const ctx = canvas.getContext('2d');
		let userRange = 1;
		let stop = false;
		let lineColor = 'white';

		function getRandomGray() {
			const hue = Math.random() * 100;
			if (hue >= 50 ) {
				lineColor = 'black';
				 
			 } else {
				lineColor = "white";
			 }
			return `hsl(0, 0%, ${hue}%)`;
		}

		function makeLine(range) {
			const canvasMiddle = canvas.height / 2;
			let lastY = canvasMiddle + parseFloat(Math.random().toFixed(2) * (range / 2));
			let negative = false;
			for (i = 0; i < canvas.width; i++) {
				const newX = i;

				let random = parseFloat(Math.random().toFixed(2) * (range / 4)) - range / 8;

				// check if new point is in range of range
				if (lastY + random >= canvasMiddle + range
					|| lastY + random <= canvasMiddle - range) {
						random = -random;
				}
				const newY = lastY + random;

				ctx.beginPath();
				// start from
				ctx.moveTo(i-1, lastY);
				// go to
				ctx.lineTo(newX, newY);
				ctx.closePath();
				ctx.stroke();
				
				lastY = newY;
				
			}
		}

		function draw() {
			canvas.width = window.innerWidth;
			canvas.height = window.innerHeight;
			ctx.lineJoin = 'round';
			ctx.lineCap = 'round';
			ctx.lineWidth = 2;
			ctx.strokeStyle = lineColor;
			makeLine(userRange);

		}

		function beginDraw() {
			
			const interval = setInterval(function() {
				if (stop) { clearInterval(interval) }
				for (i = 0; i < 50; i++) {
					draw();
				}
			}, 100)
		}

		function stopDraw() {
			stop = !stop;
			if (!stop) { beginDraw(); }
		}

		function increaseRange() {
			document.body.style.background = getRandomGray();
			userRange += 10;
		}

		window.addEventListener('load', beginDraw);
		window.addEventListener('resize', draw);
		window.addEventListener('click', increaseRange);
		window.addEventListener('touchStart', increaseRange);
	
	</script>

</body>
</html>


