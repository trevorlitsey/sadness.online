<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="icon" href="ptrk2.gif" type="image/gif">
  <title>sadness.online/gray</title>
</head>
<body>
  <div class="wrapper">
      <canvas id="draw" width="100%" height="100%"></canvas>
  </div>
  
<script>

  const canvas = document.querySelector('#draw');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  ctx.strokeStyle = '#BADA55';
  ctx.lineWidth = 10;

  let fromX = 0;
  let toX = 0;
  let fromY = 1; 
  let toY = 101;
  let hue = 0;
  let stop = false;
  let colorDirection = true;
  let lineDirection = true;

  function draw (e) {

    if ((toY >= canvas.height || toY >= window.innerHeight) || fromY <= 0) {
      lineDirection = !lineDirection;
      if (lineDirection) {  
        fromY += 2;
        toY += 2;
      }
      if (!lineDirection) {  
        fromY -= 2;
        toY -= 2;
      }
    }
    console.log(lineDirection);

    if (lineDirection && fromX > canvas.width) {
        fromX = 0;
        toX = 0;
        fromY += 100;
        toY += 100;
    }
    if (!lineDirection && fromX < 0) {
      fromX = canvas.width;
      toX = canvas.width;
      fromY -= 100;
      toY -= 100;
    }
    
    ctx.strokeStyle = `hsl(0, 0%, ${hue}%)`;

    ctx.beginPath();
    // start from
    ctx.moveTo(fromX, fromY);
    // go to
    ctx.lineTo(toX, toY);
    ctx.stroke();

    colorDirection ? hue += .1 : hue -= .1;

    if (lineDirection) {
      fromX += 2;
      toX += 2;
    } else {
      fromX -= 2;
      toX -= 2;
    }
    
    if (hue >= 100 || hue <= 0) {
      colorDirection = !colorDirection;
    }

  }

  function beginDraw() {
    const interval = setInterval(function() {
      if (stop) { clearInterval(interval) }
      draw();
    }, 1)
  }

  function stopDraw() {
    stop = !stop;
    if (!stop) { beginDraw(); }
  }

  window.addEventListener('load', beginDraw);
  window.addEventListener('click', stopDraw);

</script>

<style>
  html, body {
    margin:0;
    display: flex;
    justify-content: center;
  }

  .wrapper {
    margin:0 auto;
    height: 100%;
    width: 100%;
  }

</style>

</body>
</html>
